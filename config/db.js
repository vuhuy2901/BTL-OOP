const sql = require("mssql");

const config = {
  server: "VUHUY\\TUAN", // t√™n instance SQL Server c·ªßa b·∫°n
  database: "SHOP_DO_THE_THAO",
  options: {
    encrypt: false,
    trustServerCertificate: true,
  },
  authentication: {
    type: "ntlm", // b·∫Øt bu·ªôc ph·∫£i c√≥
    options: {
      userName: "TUAN", // t√†i kho·∫£n Windows
      password: "", // b·ªè tr·ªëng v√¨ l√† Windows Auth
      domain: "VUHUY", // t√™n m√°y (domain c·ª•c b·ªô)
    },
  },
};

async function testConnection() {
  try {
    console.log("üîÑ ƒêang k·∫øt n·ªëi ƒë·∫øn SQL Server...");
    const pool = await sql.connect(config);
    console.log("‚úÖ K·∫øt n·ªëi th√†nh c√¥ng!");

    const result = await pool.request().query("SELECT name FROM sys.tables");
    console.log("üìã Danh s√°ch b·∫£ng trong database:");
    result.recordset.forEach((row) => console.log(" -", row.name));

    await pool.close();
  } catch (err) {
    console.error("‚ùå L·ªói k·∫øt n·ªëi:", err);
  }
}

testConnection();
